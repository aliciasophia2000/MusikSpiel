<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Turntable</title>

<style>
  :root{
    --bg:#f4f4f2;
    --card:#fff;
    --text:#111;
    --muted:#777;
  }

  body{
    margin:0;
    background:var(--bg);
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
    display:flex;
    justify-content:center;
    min-height:100vh;
    color:var(--text);
  }

  .wrap{ width:min(520px,92vw); padding:22px 0 40px; }

  .panel{
    background:var(--card);
    border-radius:18px;
    box-shadow:0 18px 60px rgba(0,0,0,.10);
    padding:16px;
  }

  .turntable{
    position:relative;
    border-radius:14px;
    overflow:hidden;
    background:#eee;
    aspect-ratio: 1 / 1; /* hÃ¤lt das Bild quadratisch */
  }

  /* Basisbild (statisch) */
  .base{
    position:absolute;
    inset:0;
    background-size:cover;
    background-repeat:no-repeat;
    background-position:center;
  }

  /* âœ… Nur die PLATTE als runder Ausschnitt (dreht sich) */
  .disc{
    position:absolute;

    /* Diese Werte sind auf dein Motiv geschÃ¤tzt (Platte links-mittig).
       Wenn nÃ¶tig, sag ich dir gleich, wie duâ€™s fein justierst. */
    width: 64%;
    height: 64%;
    left: 12%;
    top: 12%;

    border-radius:50%;
    overflow:hidden;

    /* Gleicher Bildausschnitt wie Hintergrund */
    background-size:cover;
    background-repeat:no-repeat;

    /* Wichtig: Hintergrund-Ausschnitt exakt an die Position des Disc-Elements anpassen */
    background-position: 34% 34%;

    /* Kleiner Schatten fÃ¼r â€žTiefeâ€œ */
    box-shadow: 0 8px 20px rgba(0,0,0,.18);
  }

  .spinning{
    animation: spin 1.55s linear infinite;
  }

  @keyframes spin{
    from{ transform: rotate(0deg); }
    to{ transform: rotate(360deg); }
  }

  /* kleine LED unten links */
  .led{
    position:absolute;
    width:10px; height:10px;
    border-radius:50%;
    left: 8%;
    bottom: 10%;
    background: rgba(255,255,255,.35);
    box-shadow: 0 0 0 rgba(0,0,0,0);
  }

  .led.on{
    background:#00d084;
    animation: pulse 1.2s infinite;
  }

  @keyframes pulse{
    0%{ box-shadow: 0 0 0 0 rgba(0,208,132,.55); }
    70%{ box-shadow: 0 0 0 10px rgba(0,208,132,0); }
    100%{ box-shadow: 0 0 0 0 rgba(0,208,132,0); }
  }

  /* Button Premium-ish */
  .playBtn{
    margin-top:18px;
    width:100%;
    padding:16px;
    border-radius:14px;
    border:1px solid rgba(0,0,0,.12);
    background: linear-gradient(180deg, #1b1b1b, #0e0e0e);
    color:#fff;
    font-weight:850;
    font-size:15px;
    letter-spacing:.06em;
    cursor:pointer;
    box-shadow: 0 14px 30px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.10);
    display:flex;
    align-items:center;
    justify-content:center;
    gap:10px;
    transition: transform .15s ease, filter .15s ease, box-shadow .15s ease;
  }
  .playBtn:hover{
    filter: brightness(1.06);
    box-shadow: 0 18px 40px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.12);
  }
  .playBtn:active{
    transform: translateY(1px) scale(0.99);
  }

  .hint{
    margin-top:12px;
    font-size:13px;
    color:var(--muted);
    line-height:1.35;
  }

  .spotifyBox{ margin-top:16px; }

  .error{
    margin-top:12px;
    padding:12px 14px;
    background:#fff3f3;
    border-radius:12px;
    font-size:14px;
    color:#8a1f1f;
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="panel">

    <div class="turntable" id="tt">
      <div class="base" id="base"></div>
      <div class="disc" id="disc"></div>
      <div class="led" id="led" aria-hidden="true"></div>
    </div>

    <button class="playBtn" id="playBtn">
      <span>PLAY SONG</span><span aria-hidden="true">â–¶ï¸Ž</span>
    </button>

    <div class="spotifyBox" id="spotifyBox"></div>

    <div class="hint">
      iPhone blockt Autoplay manchmal. Wenn nichts startet: einmal im Spotify-Player auf â–¶ï¸Ž tippen.
    </div>

  </div>
</div>

<script>
  // âœ… Bilddatei (bei dir aktuell so)
  const IMG = "turntable.jpg.JPG";

  // ðŸŽµ Songs
  const songs = {
    1: { spotify: "6oHDvarQSp0mf5AD1SyNH0" }
  };

  const params = new URLSearchParams(window.location.search);
  const songId = params.get("song");

  const base = document.getElementById("base");
  const disc = document.getElementById("disc");
  const led  = document.getElementById("led");
  const playBtn = document.getElementById("playBtn");
  const spotifyBox = document.getElementById("spotifyBox");

  // Bild setzen
  base.style.backgroundImage = `url('${IMG}')`;
  disc.style.backgroundImage = `url('${IMG}')`;

  if (songId && songs[songId]) {
    const trackId = songs[songId].spotify;

    playBtn.addEventListener("click", () => {
      // Animation an
      disc.classList.add("spinning");
      led.classList.add("on");

      // Spotify Player laden
      spotifyBox.innerHTML = `
        <iframe
          src="https://open.spotify.com/embed/track/${trackId}?autoplay=1"
          width="100%"
          height="380"
          frameborder="0"
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
        </iframe>
      `;

      // Button ausblenden (optional)
      playBtn.style.display = "none";
    });

  } else {
    playBtn.disabled = true;
    spotifyBox.innerHTML = `<div class="error">Fehlt <b>?song=1</b> in der URL.</div>`;
  }
</script>

</body>
</html>